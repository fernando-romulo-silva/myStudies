What is the final outcome of a container created from the following Dockerfile?

FROM busybox:latest
ENTRYPOINT ["/bin/ping","-c","5"]
CMD ["localhost"]

A)
Container will remain in created state.

B)
Container will ping localhost for 5 times and will return to its shell.

C)
Container will ping the localhost for 5 times and will stop running.

D)
Container will get stuck in infinite pinging loop.












































Answer C

CMD instruction allows you to set a default command, which will be executed only when you run container without specifying a command. 
If Docker container runs with a command, the default command will be ignored. 
If Dockerfile has more than one CMD instruction, all but last CMD instructions are ignored.


ENTRYPOINT instruction allows you to configure a container that will run as an executable. 
It looks similar to CMD, because it also allows you to specify a command with parameters. 
The difference is ENTRYPOINT command and parameters are not ignored when Docker container runs with command line parameters. 
(There is a way to ignore ENTTRYPOINT, but it is unlikely that you will do it.)

$ docker build -t test .
Sending build context to Docker daemon  2.048kB
Step 1/3 : FROM busybox:latest
 ---> 62aedd01bd85
Step 2/3 : ENTRYPOINT ["/bin/ping","-c","5"]
 ---> Using cache
 ---> ace98dfebc31
Step 3/3 : CMD ["google.com"]
 ---> Running in c3780b2b8f23
Removing intermediate container c3780b2b8f23
 ---> cad74987a6ed
Successfully built cad74987a6ed
Successfully tagged test:latest
fernando@pc02:~/Downloads/DockerTemp$ docker run test
PING google.com (142.250.200.110): 56 data bytes
64 bytes from 142.250.200.110: seq=0 ttl=57 time=28.515 ms
64 bytes from 142.250.200.110: seq=1 ttl=57 time=30.886 ms
64 bytes from 142.250.200.110: seq=2 ttl=57 time=22.514 ms
64 bytes from 142.250.200.110: seq=3 ttl=57 time=24.925 ms
64 bytes from 142.250.200.110: seq=4 ttl=57 time=22.763 ms

--- google.com ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max = 22.514/25.920/30.886 ms

 

